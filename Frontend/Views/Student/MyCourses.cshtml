@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>My courses</h1>
    <div class="list-course">
        <div class="course-item">
            <a href="" class="course">
                <div class="name"></div>
                <div class="description"></div>
                <div class="author"></div>
            </a>
        </div>
    </div>

    <script src="~/js/auth/api.js"></script>
    <script>
        const token = getAccessToken();

        getCourse();
        function getCourse() {
            fetch("http://localhost:5020/api/Course/MyCourses", {
                headers: { Authorization: `Bearer ${token}` },
            })
                .then((response) => response.json())
                .then((data) => {
                    var listCourse = document.querySelector(".list-course");
                    data.forEach((course) => {
                        var courseItem = document.createElement("div");
                        courseItem.classList.add("course-item");
                        courseItem.innerHTML = `
                                    <a href="/Student/CourseDetail?courseId=${course.courseId}" class="course">
                                <div class="name">Course Name: ${course.name}</div>
                                <div class="description">Description: ${course.description}</div>
                                <div class="author">Author: ${course.author}</div>
                            </a>
                            --------------------------------
                        `;
                        listCourse.appendChild(courseItem);
                });
            });
        }
    </script>
</body>
</html>